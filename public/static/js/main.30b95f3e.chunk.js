(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{173:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},367:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),i=n(31),s=n.n(i),o=(n(173),n(174),n(15)),l=(n(175),n(24)),j=(n(176),n(162)),u=n.n(j),d=n(167),b=n.n(d),O=n(2),x=function(){var e=Object(r.useState)({lanes:[{id:"1",title:"Nuovi",cards:[]},{id:"2",title:"In Carico",cards:[]},{id:"3",title:"Completed",cards:[]}]}),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),s=Object(o.a)(i,2),j=s[0],d=s[1];Object(r.useEffect)((function(){return(c=b()()).emit("JOIN"),function(){c.off()}}),[]),Object(r.useEffect)((function(){return c.on("CURRENT_BOARD_STATUS",(function(e){console.log(e),d(null===e||void 0===e?void 0:e._id),delete e._id,a(e)})),function(){c.off()}}),[]);return Object(O.jsx)(u.a,{style:{backgroundColor:"white"},data:n,onDataChange:function(e){console.log("LANES",Object(l.a)(Object(l.a)({},e),{},{_id:j})),a(e)},onCardMoveAcrossLanes:function(){console.log("DRAG"),c.emit("BOARD_UPDATE",Object(l.a)(Object(l.a)({},n),{},{_id:j}))},editable:!0})},h=function(){return Object(O.jsx)(x,{})},f=n(168),p=n(21),v=n.n(p),m=n(33),g=n(368),k=n(67),S=n.n(k),I="/api/tickets",y=function(){var e=Object(m.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(I);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,c,r,a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.title,r=t.description,a=t.laneId,e.next=3,S.a.put("".concat(I,"/edit/").concat(n),{title:c,description:r,laneId:a});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,c,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.laneId,e.next=3,S.a.delete("".concat(I,"/delete/").concat(n),{data:{laneId:c}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.ticket,n=t.id,c=t.description,a=t.title,i=t.laneId,s=e.updateTicketTable,l=e.setModal,j=Object(r.useState)(c),u=Object(o.a)(j,2),d=u[0],b=u[1],x=Object(r.useState)(!1),h=Object(o.a)(x,2),f=h[0],p=h[1],k=function(){var e=Object(m.a)(v.a.mark((function e(t){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={id:n,title:t.target.title.value,description:t.target.description.value,laneId:i},e.prev=2,p(!0),e.next=6,N(c);case 6:p(!1),l(!1),s(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),p(!1),console.log("ERR",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h4",{children:a}),Object(O.jsxs)("form",{onSubmit:k,children:[Object(O.jsx)("input",{type:"hidden",id:"title",name:"title",value:a}),Object(O.jsx)("input",{type:"hidden",id:"laneId",name:"laneId",value:i}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{for:"description",children:"Descrizione :"}),Object(O.jsx)("textarea",{style:{resize:"none"},className:"form-control",id:"description",name:"description",rows:"5",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(O.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(O.jsxs)("button",{type:"submit",className:"btn btn-primary",children:["Aggiorna ",f?Object(O.jsx)(g.a,{color:"light",size:"sm"}):null]})," ",Object(O.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return l(!1)},children:"Cancel"})]})]})]})},w=n(369),T=n(370),R=n(380),D=n(371),A=n(372),_=n(29),M=function(e){var t=e.ticket,n=t.id,c=t.laneId,a=e.updateTicketTable,i=e.setModal,s=Object(r.useState)(!1),l=Object(o.a)(s,2),j=l[0],u=l[1],d=function(){var e=Object(m.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,E({id:n,laneId:c});case 4:u(!1),i(!1),a(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(!1),console.log("ERROR DELETING",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Sei sicuro di voler eliminare?"}),Object(O.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(O.jsxs)("button",{type:"button",className:"btn btn-danger",onClick:d,children:["Elimina ",j?Object(O.jsx)(g.a,{color:"light",size:"sm"}):Object(O.jsx)(_.a,{icon:"trash-alt"})]})," ",Object(O.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return i(!1)},children:["Indietro ",Object(O.jsx)(_.a,{icon:"arrow-right"})]})]})]})},F=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(o.a)(a,2),s=i[0],l=i[1],j=Object(r.useState)(!1),u=Object(o.a)(j,2),d=u[0],b=u[1],x=Object(r.useState)(!1),h=Object(o.a)(x,2),p=h[0],v=h[1],m=Object(r.useState)({}),g=Object(o.a)(m,2),k=g[0],S=g[1],I=Object(r.useState)({}),N=Object(o.a)(I,2),E=N[0],F=N[1],J=function(){y().then((function(e){(null===e||void 0===e?void 0:e.results[0])?(c(null===e||void 0===e?void 0:e.results),l([].concat(Object(f.a)(Object.keys(null===e||void 0===e?void 0:e.results[0]).map((function(e){return"laneId"===e?e="status":e}))),["Edit","Delete"]))):(c([]),l(["id","title","description","status","Edit","Delete"]))})).catch((function(e){return console.log("ERRORE : ",e)}))};Object(r.useEffect)((function(){J()}),[]);var L=function(e){switch(e){case"1":return Object(O.jsxs)("span",{children:[Object(O.jsx)(_.a,{className:"text-danger",icon:"tasks"})," Nuovo"]});case"2":return Object(O.jsxs)("span",{children:[Object(O.jsx)(_.a,{className:"text-warning",icon:"wrench"})," In Carico"]});case"3":return Object(O.jsxs)("span",{children:[Object(O.jsx)(_.a,{className:"text-success",icon:"check-circle"})," Completed"]})}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(!d),S(e)},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(!p),F(e)};return Object(O.jsxs)(O.Fragment,{children:[n.length>0?null:Object(O.jsx)("h3",{className:"text-center mt-5",children:"No tickets to display.."}),Object(O.jsxs)(w.a,{responsive:!0,hover:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsx)("tr",{children:!!s&&s.map((function(e){return Object(O.jsx)("th",{children:e},e)}))})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"row",children:(null===e||void 0===e?void 0:e.id.substring(0,7))+"..."}),Object(O.jsx)("td",{children:null===e||void 0===e?void 0:e.title}),Object(O.jsx)("td",{children:(null===e||void 0===e?void 0:e.description.substring(0,10))+"..."}),Object(O.jsx)("td",{children:L(null===e||void 0===e?void 0:e.laneId)}),Object(O.jsx)("td",{children:Object(O.jsx)(T.a,{color:"primary",onClick:function(){return P(e)},children:Object(O.jsx)(_.a,{icon:"edit"})})}),Object(O.jsx)("td",{children:Object(O.jsx)(T.a,{color:"danger",onClick:function(){return U(e)},children:Object(O.jsx)(_.a,{icon:"trash-alt"})})})]},null===e||void 0===e?void 0:e.id)}))})]}),Object(O.jsxs)(R.a,{isOpen:d,toggle:P,children:[Object(O.jsxs)(D.a,{toggle:P,children:[L(null===k||void 0===k?void 0:k.laneId),Object(O.jsx)("br",{}),Object(O.jsxs)("small",{children:["Ticket id : ",null===k||void 0===k?void 0:k.id]})]}),Object(O.jsx)(A.a,{children:Object(O.jsx)(C,{ticket:k,updateTicketTable:J,setModal:b})})]}),Object(O.jsxs)(R.a,{isOpen:p,toggle:U,children:[Object(O.jsxs)(D.a,{toggle:U,children:[L(null===E||void 0===E?void 0:E.laneId),Object(O.jsx)("br",{}),Object(O.jsxs)("small",{children:["Ticket id : ",null===E||void 0===E?void 0:E.id]})]}),Object(O.jsx)(A.a,{children:Object(O.jsx)(M,{ticket:E,updateTicketTable:J,setModal:v})})]})]})},J=function(){return Object(O.jsx)(F,{})},L=n(373),P=n(374),U=n(375),B=n(376),z=n(377),G=n(378),H=n(379),V=n(52),q=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(O.jsx)("div",{children:Object(O.jsxs)(L.a,{color:"dark",expand:"md",dark:!0,children:[Object(O.jsx)(P.a,{className:"mr-auto",children:"Manager"}),Object(O.jsx)(U.a,{onClick:function(){return c(!n)},className:"mr-2"}),Object(O.jsx)(B.a,{isOpen:!n,navbar:!0,children:Object(O.jsxs)(z.a,{className:"ml-auto",navbar:!0,children:[Object(O.jsx)(G.a,{children:Object(O.jsx)(H.a,{children:Object(O.jsx)(V.b,{to:"/",children:"Home"})})}),Object(O.jsx)(G.a,{children:Object(O.jsx)(H.a,{children:Object(O.jsx)(V.b,{to:"/tickets",children:"Tickets"})})})]})})]})})},K=Object(r.createContext)(),Q=function(e){var t=e.reducer,n=e.initialState,c=e.children;return Object(O.jsx)(K.Provider,{value:Object(r.useReducer)(t,n),children:c})},W=n(13);var X=function(){var e=Object(r.useContext)(K),t=Object(o.a)(e,1)[0].user;return Object(O.jsx)("div",{className:"App",children:t?Object(O.jsxs)(V.a,{children:[Object(O.jsx)(q,{}),Object(O.jsxs)(W.c,{children:[Object(O.jsx)(W.a,{exact:!0,path:"/",children:Object(O.jsx)(h,{})}),Object(O.jsx)(W.a,{exact:!0,path:"/tickets",children:Object(O.jsx)(J,{})})]})]}):Object(O.jsx)("div",{children:"no logged"})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,381)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},Z={user:JSON.parse(sessionStorage.getItem("user"))||"null"},$="SET_USER",ee="REMOVE_USER",te="UPDATE_PROFILE",ne=function(e,t){switch(console.log(t),t.type){case $:return sessionStorage.setItem("user",JSON.stringify(t.user)),Object(l.a)(Object(l.a)({},e),{},{user:t.user});case ee:return sessionStorage.removeItem("user"),Object(l.a)(Object(l.a)({},e),{},{user:t.user});case te:return sessionStorage.setItem("user",JSON.stringify(t.user)),Object(l.a)(Object(l.a)({},e),{},{user:t.user});default:return e}},ce=n(41),re=n(35);ce.b.add(re.d,re.b,re.g,re.e,re.c,re.f,re.a),s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(Q,{initialState:Z,reducer:ne,children:Object(O.jsx)(X,{})})}),document.getElementById("root")),s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(Q,{initialState:Z,reducer:ne,children:Object(O.jsx)(X,{})})}),document.getElementById("root")),Y()}},[[367,1,2]]]);
//# sourceMappingURL=main.30b95f3e.chunk.js.map